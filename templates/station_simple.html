{% extends "base.html" %}

{% block title %}Metro Madrid - Información de Estación{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/modern-trains.css">
<style>
    .main-content {
        padding: 40px;
        max-width: 1200px;
        margin: 0 auto;
    }

    .page-header {
        text-align: center;
        margin-bottom: 40px;
    }

    .page-header h1 {
        font-size: 2.5em;
        color: var(--metro-main);
        margin-bottom: 10px;
    }

    .page-header p {
        font-size: 1.2em;
        color: #666;
    }

    .search-section {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        margin-bottom: 30px;
    }

    .search-container {
        max-width: 600px;
        margin: 0 auto;
        text-align: center;
    }

    .search-title {
        color: var(--metro-main);
        margin-bottom: 25px;
        font-size: 2em;
        font-weight: 700;
    }

    .search-form {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
        justify-content: center;
    }

    .search-input {
        flex: 1;
        max-width: 400px;
        padding: 18px 20px;
        border: 3px solid #e0e0e0;
        border-radius: 25px;
        font-size: 18px;
        transition: all 0.3s ease;
        background: #f8f9fa;
    }

    .search-input:focus {
        outline: none;
        border-color: var(--metro-main);
        background: white;
        box-shadow: 0 4px 20px rgba(0,174,239,0.2);
    }

    .search-btn {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, var(--metro-main) 0%, #0056b3 100%);
        color: white;
        border: none;
        border-radius: 50%;
        font-size: 24px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .search-btn:hover {
        transform: translateY(-3px) scale(1.05);
    }

    .station-info {
        background: white;
        border-radius: 12px;
        padding: 30px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        margin-bottom: 30px;
        display: none;
    }

    .station-info.show {
        display: block;
        animation: fadeIn 0.5s ease-in-out;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .station-header {
        display: flex;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid #eee;
    }

    .station-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: var(--metro-main);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: white;
        margin-right: 20px;
    }

    .station-details h2 {
        font-size: 2em;
        color: #333;
        margin-bottom: 10px;
    }

    .station-lines {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .line-badge {
        padding: 8px 12px;
        border-radius: 20px;
        color: white;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .line-badge img {
        width: 20px;
        height: 20px;
    }

    .station-sections {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-top: 30px;
    }

    .section {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
    }

    .section h3 {
        color: #333;
        margin-bottom: 15px;
        font-size: 1.3em;
        border-bottom: 2px solid #dee2e6;
        padding-bottom: 10px;
    }

    @media (max-width: 768px) {
        .main-content {
            padding: 20px;
        }
        
        .search-form {
            flex-direction: column;
        }
        
        .search-input {
            max-width: 100%;
        }
        
        .station-sections {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="main-content">
    <div class="page-header">
        <h1>Información de Estación</h1>
        <p>Consulta horarios, líneas y estado de cualquier estación del Metro de Madrid</p>
    </div>

    <div class="search-section">
        <div class="search-container">
            <h2 class="search-title">🔍 Buscar Estación</h2>
            <form id="searchForm" method="GET" action="/station" class="search-form">
                <input type="text" 
                       id="stationSearch" 
                       name="q" 
                       class="search-input"
                       placeholder="Escribe el nombre de una estación..."
                       value="{{ query or '' }}">
                <button type="submit" class="search-btn">🚀</button>
            </form>
            <p style="color: #666; font-size: 0.95em;">
                💡 Consejo: Escribe el nombre de una estación y presiona Enter
            </p>
        </div>
    </div>

    {% if resultados %}
    <div class="station-info show">
        <div class="station-header">
            <div class="station-icon">🚉</div>
            <div class="station-details">
                <h2>{{ resultados[0].nombre if resultados else 'Estación' }}</h2>
                <div class="station-lines">
                    {% if resultados %}
                        {% for resultado in resultados %}
                            <div class="line-badge" style="background: {{ resultado.color_linea or '#666' }};">
                                <img src="/static/logos/lineas/linea-{{ resultado.linea }}.svg" alt="Línea {{ resultado.linea }}">
                                Línea {{ resultado.linea }}
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="station-sections">
            <div class="section">
                <h3>📋 Información General</h3>
                <p><strong>Nombre:</strong> {{ resultados[0].nombre if resultados else 'N/A' }}</p>
                <p><strong>ID:</strong> {{ resultados[0].id_fijo if resultados else 'N/A' }}</p>
                <p><strong>Líneas:</strong> 
                    {% if resultados %}
                        {% for resultado in resultados %}
                            Línea {{ resultado.linea }}{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    {% else %}
                        N/A
                    {% endif %}
                </p>
            </div>

            <div class="section">
                <h3>🚄 Próximos Trenes</h3>
                <div id="modernTrainsContainer">
                    <p>Selecciona una estación para ver los próximos trenes</p>
                </div>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/modern-trains.js"></script>
<script>
    console.log('🚀 Script de station_simple.html cargado');
    
    // Función para obtener información de líneas
    function getLineInfo(lineNumber) {
        const lineColors = {
            '1': { color: '#0065FE', name: 'Línea 1', logo: '/static/logos/lineas/linea-1.svg' },
            '2': { color: '#FF0000', name: 'Línea 2', logo: '/static/logos/lineas/linea-2.svg' },
            '3': { color: '#FFDF00', name: 'Línea 3', logo: '/static/logos/lineas/linea-3.svg' },
            '4': { color: '#824100', name: 'Línea 4', logo: '/static/logos/lineas/linea-4.svg' },
            '5': { color: '#339900', name: 'Línea 5', logo: '/static/logos/lineas/linea-5.svg' },
            '6': { color: '#FF6600', name: 'Línea 6', logo: '/static/logos/lineas/linea-6.svg' },
            '7': { color: '#FF9900', name: 'Línea 7', logo: '/static/logos/lineas/linea-7.svg' },
            '8': { color: '#FF00FF', name: 'Línea 8', logo: '/static/logos/lineas/linea-8.svg' },
            '9': { color: '#9900FF', name: 'Línea 9', logo: '/static/logos/lineas/linea-9.svg' },
            '10': { color: '#0066FF', name: 'Línea 10', logo: '/static/logos/lineas/linea-10.svg' },
            '11': { color: '#00CCFF', name: 'Línea 11', logo: '/static/logos/lineas/linea-11.svg' },
            '12': { color: '#FFCC00', name: 'Línea 12', logo: '/static/logos/lineas/linea-12-metrosur.svg' },
            'R': { color: '#FF6600', name: 'Ramal', logo: '/static/logos/lineas/ramal.svg' }
        };
        return lineColors[lineNumber] || { color: '#666', name: `Línea ${lineNumber}`, logo: '/static/logos/lineas/linea-1.svg' };
    }
</script>
{% endblock %} 